name: Build
description: Builds the project

inputs:
  package-version:
    description: The Nuget package version
    required: true

outputs:
  artifact-path:
    description: The location of the artifacts directory
    value: ${{ steps.build.outputs.artifact }}

runs:
  using: composite

  steps:
    - id: build
      shell: bash
      run: |
        dotnet tool restore

        ARTIFACT_DIR="./artifacts"
        mkdir -p "$ARTIFACT_DIR"
        
        dotnet build --configuration Release \
          -p:PackageVersion="${{ inputs.package-version }}" \
          --artifacts-path "$ARTIFACT_DIR"
        
        echo "artifact=${ARTIFACT_DIR}" >> "$GITHUB_OUTPUT"